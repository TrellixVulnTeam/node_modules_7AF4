var vt=Object.create,se=Object.defineProperty;var Tt=Object.getOwnPropertyDescriptor;var It=Object.getOwnPropertyNames;var Et=Object.getPrototypeOf,bt=Object.prototype.hasOwnProperty;var _e=t=>se(t,"__esModule",{value:!0});var gt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),wt=(t,e)=>{for(var r in e)se(t,r,{get:e[r],enumerable:!0})},yt=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of It(e))!bt.call(t,n)&&n!=="default"&&se(t,n,{get:()=>e[n],enumerable:!(r=Tt(e,n))||r.enumerable});return t},$=t=>yt(_e(se(t!=null?vt(Et(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var We=gt((le,Ue)=>{(function(t,e){typeof le=="object"&&typeof Ue!="undefined"?e(le):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.fastUniqueNumbers={}))})(le,function(t){"use strict";var e=function(f){return function(o){var h=f(o);return o.add(h),h}},r=function(f){return function(o,h){return f.set(o,h),h}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,a=536870912,m=a*2,b=function(f,o){return function(h){var k=o.get(h),y=k===void 0?h.size:k<m?k+1:0;if(!h.has(y))return f(h,y);if(h.size<a){for(;h.has(y);)y=Math.floor(Math.random()*m);return f(h,y)}if(h.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;h.has(y);)y=Math.floor(Math.random()*n);return f(h,y)}},_=new WeakMap,ee=r(_),d=b(ee,_),u=e(d);t.addUniqueNumber=u,t.generateUniqueNumber=d,Object.defineProperty(t,"__esModule",{value:!0})})});_e(exports);wt(exports,{IdleTimerConsumer:()=>it,IdleTimerContext:()=>Z,IdleTimerProvider:()=>ot,createMocks:()=>$e,useIdleTimer:()=>q,useIdleTimerContext:()=>st,withIdleTimer:()=>Fe,workerTimers:()=>Xe});var ae=$(require("react"));function Fe(t){return(0,ae.forwardRef)(function(r,n){let a={...r};!a.onPrompt&&t.prototype.onPrompt&&(a.onPrompt=()=>{t.prototype.onPrompt()}),!a.onIdle&&t.prototype.onIdle&&(a.onIdle=()=>{t.prototype.onIdle()}),!a.onActive&&t.prototype.onActive&&(a.onActive=b=>{t.prototype.onActive(b)}),!a.onAction&&t.prototype.onAction&&(a.onAction=b=>{t.prototype.onAction(b)});let m=q(a);return typeof n=="function"?n(m):n&&(n.current=m),ae.default.createElement(t,{...r,...m})})}var i=$(require("react"));var K=$(We());var Be=t=>t.method!==void 0&&t.method==="call";var He=t=>t.error===null&&typeof t.id=="number";var Ge=t=>{let e=new Map([[0,()=>{}]]),r=new Map([[0,()=>{}]]),n=new Map,a=new Worker(t);return a.addEventListener("message",({data:d})=>{if(Be(d)){let{params:{timerId:u,timerType:p}}=d;if(p==="interval"){let f=e.get(u);if(typeof f=="number"){let o=n.get(f);if(o===void 0||o.timerId!==u||o.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof f!="undefined")f();else throw new Error("The timer is in an undefined state.")}else if(p==="timeout"){let f=r.get(u);if(typeof f=="number"){let o=n.get(f);if(o===void 0||o.timerId!==u||o.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof f!="undefined")f(),r.delete(u);else throw new Error("The timer is in an undefined state.")}}else if(He(d)){let{id:u}=d,p=n.get(u);if(p===void 0)throw new Error("The timer is in an undefined state.");let{timerId:f,timerType:o}=p;n.delete(u),o==="interval"?e.delete(f):r.delete(f)}else{let{error:{message:u}}=d;throw new Error(u)}}),{clearInterval:d=>{let u=(0,K.generateUniqueNumber)(n);n.set(u,{timerId:d,timerType:"interval"}),e.set(d,u),a.postMessage({id:u,method:"clear",params:{timerId:d,timerType:"interval"}})},clearTimeout:d=>{let u=(0,K.generateUniqueNumber)(n);n.set(u,{timerId:d,timerType:"timeout"}),r.set(d,u),a.postMessage({id:u,method:"clear",params:{timerId:d,timerType:"timeout"}})},setInterval:(d,u)=>{let p=(0,K.generateUniqueNumber)(e);return e.set(p,()=>{d(),typeof e.get(p)=="function"&&a.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"interval"}})}),a.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"interval"}}),p},setTimeout:(d,u)=>{let p=(0,K.generateUniqueNumber)(r);return r.set(p,d),a.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"timeout"}}),p}}};var Q=null,qe=(t,e)=>()=>{if(Q!==null)return Q;let r=new Blob([e],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(r);return Q=t(n),Q.setTimeout(()=>URL.revokeObjectURL(n),0),Q};var Ve=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`;var ce=qe(Ge,Ve),je=t=>ce().clearInterval(t),Ye=t=>ce().clearTimeout(t),Je=(t,e)=>ce().setInterval(t,e),ze=(t,e)=>ce().setTimeout(t,e);var g=(typeof window=="undefined"?"undefined":typeof window)=="object";var v={setTimeout:g?setTimeout.bind(window):setTimeout,clearTimeout:g?clearTimeout.bind(window):clearTimeout,setInterval:g?setInterval.bind(window):setInterval,clearInterval:g?clearInterval.bind(window):clearInterval},Xe={setTimeout:ze,clearTimeout:Ye,setInterval:Je,clearInterval:je};function $e(){v.setTimeout=setTimeout,v.clearTimeout=clearTimeout,v.setInterval=setInterval,v.clearInterval=clearInterval}function Ke(t){v.setTimeout=t.setTimeout,v.clearTimeout=t.clearTimeout,v.setInterval=t.setInterval,v.clearInterval=t.clearInterval}var V={},Qe=class{constructor(e){this.closed=!1;this.mc=new MessageChannel;this.name=e,V[e]=V[e]||[],V[e].push(this),this.mc.port1.start(),this.mc.port2.start(),this.onStorage=this.onStorage.bind(this),window.addEventListener("storage",this.onStorage)}onStorage(e){if(e.storageArea!==window.localStorage||e.key.substring(0,this.name.length)!==this.name||e.newValue===null)return;let r=JSON.parse(e.newValue);this.mc.port2.postMessage(r)}postMessage(e){if(this.closed)throw new Error("InvalidStateError");let r=JSON.stringify(e),n=`${this.name}:${String(Date.now())}${String(Math.random())}`;window.localStorage.setItem(n,r),v.setTimeout(()=>{window.localStorage.removeItem(n)},500),V[this.name].forEach(a=>{a!==this&&a.mc.port2.postMessage(JSON.parse(r))})}close(){if(this.closed)return;this.closed=!0,this.mc.port1.close(),this.mc.port2.close(),window.removeEventListener("storage",this.onStorage);let e=V[this.name].indexOf(this);V[this.name].splice(e,1)}get onmessage(){return this.mc.port1.onmessage}set onmessage(e){this.mc.port1.onmessage=e}get onmessageerror(){return this.mc.port1.onmessageerror}set onmessageerror(e){this.mc.port1.onmessageerror=e}addEventListener(e,r){return this.mc.port1.addEventListener(e,r)}removeEventListener(e,r){return this.mc.port1.removeEventListener(e,r)}dispatchEvent(e){return this.mc.port1.dispatchEvent(e)}},Ze=typeof window=="undefined"?void 0:typeof window.BroadcastChannel=="function"?window.BroadcastChannel:Qe;function et(t=0){return new Promise(e=>v.setTimeout(e,t))}var I=()=>g?performance.now():Date.now();function ue(){return I().toString(36).substring(2)}var c;(function(o){o[o.APPLY=0]="APPLY",o[o.TELL=1]="TELL",o[o.CLOSE=2]="CLOSE",o[o.REGISTER=3]="REGISTER",o[o.DEREGISTER=4]="DEREGISTER",o[o.IDLE=5]="IDLE",o[o.ACTIVE=6]="ACTIVE",o[o.PROMPT=7]="PROMPT",o[o.START=8]="START",o[o.RESET=9]="RESET",o[o.PAUSE=10]="PAUSE",o[o.RESUME=11]="RESUME",o[o.MESSAGE=12]="MESSAGE"})(c||(c={}));var Ee=class{constructor(e,r){this.token=ue();this.isLeader=!1;this.isDead=!1;this.isApplying=!1;this.reApply=!1;this.intervals=[];this.listeners=[];this.channel=e,this.options=r,this.apply=this.apply.bind(this),this.awaitLeadership=this.awaitLeadership.bind(this),this.sendAction=this.sendAction.bind(this)}async apply(){if(this.isLeader||this.isDead)return!1;if(this.isApplying)return this.reApply=!0,!1;this.isApplying=!0;let e=!1,r=n=>{let{token:a,action:m}=n.data;a!==this.token&&(m===c.APPLY&&a>this.token&&(e=!0),m===c.TELL&&(e=!0))};this.channel.addEventListener("message",r);try{return this.sendAction(c.APPLY),await et(this.options.responseTime),this.channel.removeEventListener("message",r),this.isApplying=!1,e?this.reApply?this.apply():!1:(this.assumeLead(),!0)}catch{return!1}}awaitLeadership(){if(this.isLeader)return Promise.resolve();let e=!1,r=null;return new Promise(n=>{let a=()=>{if(e)return;e=!0,v.clearInterval(r);let b=this.intervals.indexOf(r);this.intervals.splice(b,1),this.channel.removeEventListener("message",m),n()};r=v.setInterval(()=>{this.apply().then(()=>{this.isLeader&&a()})},this.options.fallbackInterval),this.intervals.push(r);let m=b=>{let{action:_}=b.data;_===c.CLOSE&&this.apply().then(()=>{this.isLeader&&a()})};this.channel.addEventListener("message",m)})}sendAction(e){this.channel.postMessage({action:e,token:this.token})}assumeLead(){this.isLeader=!0;let e=r=>{let{action:n}=r.data;n===c.APPLY&&this.sendAction(c.TELL)};return this.channel.addEventListener("message",e),this.listeners.push(e),this.sendAction(c.TELL)}waitForLeadership(){return this.deferred?this.deferred:(this.deferred=this.awaitLeadership(),this.deferred)}close(){this.isDead||(this.isDead=!0,this.isLeader=!1,this.sendAction(c.CLOSE),this.listeners.forEach(e=>this.channel.removeEventListener("message",e)),this.intervals.forEach(e=>v.clearInterval(e)))}};var x;(function(n){n[n.PROMPTED=0]="PROMPTED",n[n.ACTIVE=1]="ACTIVE",n[n.IDLE=2]="IDLE"})(x||(x={}));var be=class{constructor(e){this.token=ue();this.registry=new Map;this.allIdle=!1;let{channelName:r}=e;if(this.options=e,this.channel=new Ze(r),this.registry.set(this.token,1),e.leaderElection){let n={fallbackInterval:2e3,responseTime:100};this.elector=new Ee(this.channel,n),this.elector.waitForLeadership()}this.channel.addEventListener("message",n=>{let{action:a,token:m,data:b}=n.data;switch(a){case c.REGISTER:this.registry.set(m,1);break;case c.DEREGISTER:this.registry.delete(m);break;case c.IDLE:this.idle(m);break;case c.ACTIVE:this.active(m);break;case c.PROMPT:this.prompt(m);break;case c.MESSAGE:this.options.onMessage(b);break;case c.START:this.options.start(!0);break;case c.RESET:this.options.reset(!0);break;case c.PAUSE:this.options.pause(!0);break;case c.RESUME:this.options.resume(!0);break}}),this.send(c.REGISTER)}get isLeader(){if(!this.elector)throw new Error('\u274C Leader election is not enabled. To Enable it set the "leaderElection" property to true.');return this.elector.isLeader}prompt(e=this.token){this.registry.set(e,0);let r=[...this.registry.values()].every(n=>n===0);e===this.token&&this.send(c.PROMPT),r&&this.options.onPrompt()}idle(e=this.token){this.registry.set(e,2);let r=[...this.registry.values()].every(n=>n===2);e===this.token&&this.send(c.IDLE),!this.allIdle&&r&&(this.allIdle=!0,this.options.onIdle())}active(e=this.token){this.registry.set(e,1);let r=[...this.registry.values()].some(n=>n===1);e===this.token&&this.send(c.ACTIVE),this.allIdle&&r&&(this.allIdle=!1,this.options.onActive())}sync(){try{this.channel.postMessage({action:c.RESET,token:this.token})}catch{}}message(e){try{this.channel.postMessage({action:c.MESSAGE,token:this.token,data:e})}catch{}}send(e){try{this.channel.postMessage({action:e,token:this.token})}catch{}}close(){this.options.leaderElection&&this.elector.close(),this.send(c.DEREGISTER),this.channel.close()}};var tt=g?document:null,rt=["mousemove","keydown","wheel","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange"];var me=$(require("react"));function N(t){let e=(0,me.useRef)(t);return(0,me.useEffect)(()=>{e.current=t},[t]),e}function nt(t,e){let r;function n(...a){r&&clearTimeout(r),r=setTimeout(()=>{t(...a),r=null},e)}return n.cancel=function(){clearTimeout(r)},n}function de(t,e){let r=0;return function(...n){let a=new Date().getTime();if(!(a-r<e))return r=a,t(...n)}}function q({timeout:t=1e3*60*20,promptTimeout:e=0,element:r=tt,events:n=rt,timers:a=void 0,immediateEvents:m=[],onPrompt:b=()=>{},onIdle:_=()=>{},onActive:ee=()=>{},onAction:d=()=>{},onMessage:u=()=>{},debounce:p=0,throttle:f=0,eventsThrottle:o=200,startOnMount:h=!0,startManually:k=!1,stopOnIdle:y=!1,crossTab:B=!1,name:ge="idle-timer",syncTimers:Y=0,leaderElection:we=!1}={}){let J=(0,i.useRef)(I()),ye=(0,i.useRef)(Date.now()),pe=(0,i.useRef)(I()),A=(0,i.useRef)(null),O=(0,i.useRef)(null),z=(0,i.useRef)(0),T=(0,i.useRef)(!0),P=(0,i.useRef)(!1),F=(0,i.useRef)(!0),X=(0,i.useRef)(!1),E=(0,i.useRef)(!1),w=(0,i.useRef)(0),S=(0,i.useRef)(0),D=(0,i.useRef)(null),l=(0,i.useRef)(null),C=N(t),te=N(e),at=N(y),Le=(0,i.useRef)(m),fe=(0,i.useRef)(r),he=(0,i.useRef)([...new Set([...n,...m]).values()]),Me=N(_),re=N(ee),ke=N(b),ne=N(u),L=(0,i.useRef)();(0,i.useEffect)(()=>{L.current&&L.current.cancel&&L.current.cancel(),p>0?L.current=nt(d,p):f>0?L.current=de(d,f):L.current=d},[d,f,p]);let xe=(0,i.useRef)();(0,i.useEffect)(()=>{B&&Y&&(xe.current=de(()=>{l.current.sync()},Y))},[B,Y]);let R=()=>{D.current!==null&&(v.clearTimeout(D.current),D.current=null)},H=(s,M=!0)=>{R(),D.current=v.setTimeout(ve,s||C.current),M&&(O.current=I())},Pe=s=>{w.current=0,S.current=I(),E.current=!0,H(te.current,!1),ke.current(s)},Se=()=>{T.current=!0,A.current=I(),at.current?(R(),W()):E.current&&(S.current=0,E.current=!1),Me.current()},Re=s=>{E.current=!1,S.current=0,T.current=!1,z.current+=I()-A.current,U(),H(),re.current(s)},ve=s=>{if(!T.current){if(te.current>0&&!E.current){l.current?l.current.prompt():Pe(s);return}l.current?l.current.idle():Se();return}l.current?l.current.active():Re(s)},Ae=s=>{if(L.current(s),E.current)return;B&&Y&&xe.current(),R();let M=I()-O.current;if((T.current&&!y||!T.current&&M>C.current)&&ve(s),P.current=!1,w.current=0,S.current=0,!T.current&&Le.current.includes(s.type)){ve(s);return}H(),l.current&&l.current.active()},oe=(0,i.useRef)();(0,i.useEffect)(()=>{let s=X.current;s&&W(),o>0?oe.current=de(Ae,o):oe.current=Ae,s&&U()},[o,B,Y]);let U=()=>{!g||X.current||(he.current.forEach(s=>{fe.current.addEventListener(s,oe.current,{capture:!0,passive:!0})}),X.current=!0)},W=(s=!1)=>{!g||(X.current||s)&&(he.current.forEach(M=>{fe.current.removeEventListener(M,oe.current,{capture:!0})}),X.current=!1)},G=(0,i.useCallback)(s=>{R(),U(),E.current&&re.current(),T.current=!1,E.current=!1,P.current=!1,w.current=0,S.current=0,l.current&&!s&&(l.current.active(),l.current.send(c.START)),H()},[D,T,C,l]),ie=(0,i.useCallback)(s=>{R(),U(),(T.current||E.current)&&(re.current(),l.current&&l.current.active()),T.current=!1,E.current=!1,P.current=!1,w.current=0,S.current=0,pe.current=I(),l.current&&(l.current.allIdle=!1,s||l.current.send(c.RESET)),H()},[D,T,C,l]),Te=(0,i.useCallback)((s=!1)=>P.current?!1:(w.current=Oe(),P.current=!0,W(),R(),l.current&&(s||l.current.send(c.PAUSE)),!0),[D,l]),Ie=(0,i.useCallback)((s=!1)=>P.current?(P.current=!1,E.current||U(),T.current||H(w.current),S.current&&(S.current=I()),l.current&&(s||l.current.send(c.RESUME)),!0):!1,[D,C,w,l]),lt=(0,i.useCallback)((s,M)=>{l.current?(M&&ne.current(s),l.current.message(s)):M&&ne.current(s)},[u]),ct=(0,i.useCallback)(()=>T.current,[T]),ut=(0,i.useCallback)(()=>E.current,[E]),mt=(0,i.useCallback)(()=>{if(!l.current)throw new Error('\u274C Cross Tab feature is not enabled. To enable it set the "crossTab" property to true.');return l.current.isLeader},[l]),Oe=(0,i.useCallback)(()=>{if(P.current)return w.current;let s=w.current?w.current:E.current?te.current:C.current,M=O.current?E.current?I()-S.current:I()-O.current:0,Ne=Math.ceil(s-M);return Ne<0?0:Math.abs(Ne)},[C,te,E,w,O]),dt=(0,i.useCallback)(()=>Math.round(I()-pe.current),[pe]),De=(0,i.useCallback)(()=>Math.round(I()-J.current),[J]),pt=(0,i.useCallback)(()=>A.current?new Date(ye.current-J.current+A.current):null,[A]),ft=(0,i.useCallback)(()=>O.current?new Date(ye.current-J.current+O.current):null,[O]),Ce=(0,i.useCallback)(()=>T.current?Math.round(I()-A.current+z.current):Math.round(z.current),[A,z]),ht=(0,i.useCallback)(()=>{let s=Math.round(De()-Ce());return s>=0?s:0},[J,A,z]);return(0,i.useEffect)(()=>{if(p>0&&f>0)throw new Error("\u274C onAction can either be throttled or debounced, not both.");a&&Ke(a);let s=()=>{l.current&&l.current.close(),L.current.cancel&&L.current.cancel(),R(),W(!0)};return g&&window.addEventListener("beforeunload",s),()=>{g&&window.removeEventListener("beforeunload",s),l.current&&l.current.close(),L.current.cancel&&L.current.cancel(),R(),W(!0)}},[]),(0,i.useEffect)(()=>{l.current&&l.current.close(),B?l.current=new be({channelName:ge,leaderElection:we,onPrompt:()=>{Pe()},onIdle:()=>{Se()},onActive:()=>{Re()},onMessage:ne.current,start:G,reset:ie,pause:Te,resume:Ie}):l.current=null},[B,ge,we,ke,Me,re,ne,G,ie,Te,Ie]),(0,i.useEffect)(()=>{R(),W(!0),F.current||(P.current=!0,T.current=!0,w.current=0),!k&&(h?G():U())},[k,h,F]),(0,i.useEffect)(()=>{if(!F.current){let s=[...new Set([...n,...m]).values()];if(W(),he.current=s,fe.current=r,Le.current=m,k)return;h?G():U()}},[r,JSON.stringify(n),JSON.stringify(m),F,k,h]),(0,i.useEffect)(()=>{if(F.current)F.current=!1;else{if(C.current=t,k)return;T.current?ie():G()}},[t,k,F,T]),{message:lt,start:G,reset:ie,pause:Te,resume:Ie,isIdle:ct,isPrompted:ut,isLeader:mt,getRemainingTime:Oe,getElapsedTime:dt,getTotalElapsedTime:De,getLastIdleTime:pt,getLastActiveTime:ft,getTotalIdleTime:Ce,getTotalActiveTime:ht}}var j=$(require("react"));var Z=(0,j.createContext)(null);function ot(t){let e=q(t);return j.default.createElement(Z.Provider,{value:e},t.children)}var it=Z.Consumer;function st(){return(0,j.useContext)(Z)}
